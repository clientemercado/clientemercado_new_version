@model  ClienteMercado.Models.AcompanharCotacaoEnviada

@{
    ViewBag.Title = "ClienteMercado";
    Layout = "~/Views/Shared/_Layout_internas2.cshtml";
}

<div id="tools-bar">
    <div class="container-fluid">
        <div class="caixa-botoes pull-left" id="caixa-botoes">
            <a tabindex="-1" href="#" class="btn">&nbsp;</a>
        </div>

        <div class="breadcrumb pull-left">
            <p><span style="color: blue;font-weight: bold;font-size: 8pt;"><a href="@Url.Action("PerfilUsuarioCotante", "UsuarioCotante", new { nmU = ClienteMercado.Utils.Utilitarios.MD5Crypt.Criptografar(@ViewBag.nomeUsuarioLogado), cloG = ClienteMercado.Utils.Utilitarios.MD5Crypt.Criptografar(Convert.ToString(@ViewBag.idLogradouro)), cbaiR = ClienteMercado.Utils.Utilitarios.MD5Crypt.Criptografar(Convert.ToString(@ViewBag.idBairro)), cciD = ClienteMercado.Utils.Utilitarios.MD5Crypt.Criptografar(Convert.ToString(@ViewBag.idCidade)), cesT = ClienteMercado.Utils.Utilitarios.MD5Crypt.Criptografar(Convert.ToString(@ViewBag.idEstado)), ccouT = ClienteMercado.Utils.Utilitarios.MD5Crypt.Criptografar(Convert.ToString(@ViewBag.idPais)) })" style="font-size: 9pt;">@ViewBag.deOndeVim</a></span> > <span font-weight bold;font-size 8pt;>@ViewBag.ondeEstou</span></p>
        </div>
    </div>
</div> 
<!-- FIM DA BARRA DE FERRAMENTAS -->

<!-- Menu Lateral -->
<div id="sidebar-wrapper">
    <div class="corpo-menu">
        <div class="divider"></div>
        <ul id="menu-content" class="menu-content">

            <li data-toggle="collapse" data-target="#cotacao_enviada" class="collapsed">
                <a href="#"><i class="fa fa-list-ul"></i> Relatórios <i class="fa fa-angle-right pull-right"></i></a>
            </li>
            <ul class="sub-menu collapse" id="cotacao_enviada">
                <li><a href="#">Relatório 1</a></li>
                <li><a href="#">Relatório 2</a></li>
                <li><a href="#">Relatório 3</a></li>
                <li><a href="#">Relatório 4</a></li>
            </ul>
            <li class="separador"></li>
            <li data-toggle="collapse" data-target="#configuracoes" class="collapsed">
                <a href="#"><i class="fa fa-gear"></i> Configurações <i class="fa fa-angle-right pull-right"></i></a>
            </li>
            <ul class="sub-menu collapse" id="configuracoes">
                <li><a href="#">Dados da Empresa</a></li>
                <li><a href="#">Dados Usuário Master</a></li>
                <li><a href="#">Outros Usuários da Empresa</a></li>
                <li><a href="#">Liberação de Cadastro</a></li>
            </ul>

        </ul>
        <div id="logo-clientemercado">
            <img src="@Url.Content("~/Content/images/logo_branca.png")" alt="">
            <p>2015 &copy; Todos os direitos reservados.</p>
        </div>
    </div>
</div>
<!-- /#sidebar-wrapper -->

<!-- Conteudo -->
<div id="page-content-wrapper">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">

                <div class="col-md-12" id="tabela1">
                    <table class="table table-striped table-ordered table-bordered col-md-4">
                        <tr>
                            <td style="border:0px;">
                                <label for="">Cotação:</label>
                                @Html.TextBoxFor(m => m.NOME_COTACAO_ENVIADA, new { @class = "form-control", @id = "NOME_COTACAO_ENVIADA", @style = "width:300px; font-weight: bold" })
                            </td>
                            <td style="border:0px;  margin-top:23px;">
                                <label for="">Status:</label>
                                @if ((Model.STATUS_COTACAO_ENVIADA == "ABERTA") || (Model.STATUS_COTACAO_ENVIADA == "EM ANDAMENTO"))
                                {
                                    @Html.TextBoxFor(m => m.STATUS_COTACAO_ENVIADA, new { @class = "form-control", @id = "STATUS_COTACAO_ENVIADA", @style = "width:150px; color: #FF0000; font-weight: bold" })
                                }
                                else
                                {
                                    @Html.TextBoxFor(m => m.STATUS_COTACAO_ENVIADA, new { @class = "form-control", @id = "STATUS_COTACAO_ENVIADA", @style = "width:150px; color: #0101DF; font-weight: bold" })
                                }
                            </td>
                            <td style="border:0px;">
                                <label for="">Categoria:</label>
                                @Html.TextBoxFor(m => m.CATEGORIA_COTACAO_ENVIADA, new { @class = "form-control", @id = "CATEGORIA_COTACAO_ENVIADA", @style = "width:300px; font-weight: bold" })
                            </td>
                            <td style="border:0px; margin-top:23px;">
                                <label for="">% Respondida: </label>
                                @if (Convert.ToDouble(Model.PERCENTUAL_RESPONDIDA_COTACAO_ENVIADA) < Convert.ToDouble(50.01))
                                {
                                    @Html.TextBoxFor(m => m.PERCENTUAL_RESPONDIDA_COTACAO_ENVIADA, new { @class = "form-control", @id = "PERCENTUAL_RESPONDIDA_COTACAO_ENVIADA", @style = "width:100px; color: #FF0000; font-weight: bold" })
                                }
                                else
                                {
                                    @Html.TextBoxFor(m => m.PERCENTUAL_RESPONDIDA_COTACAO_ENVIADA, new { @class = "form-control", @id = "PERCENTUAL_RESPONDIDA_COTACAO_ENVIADA", @style = "width:100px; color: #0101DF; font-weight: bold" })
                                }
                            </td>
                        </tr>
                    </table>

                    <div role="tabpanel" class="" id="listaItensCotacao">
                        <table id="lista_itens_cotacao" class="table col-md-4">
                            <thead>
                                <tr style="background-color: #e8e8e8;">
                                    <th align="center" colspan="4">
                                        <i class="fa fa-shopping-cart"></i> <strong>PRODUTOS COTADOS: </strong>
                                    </th>
                                    <th align="center" colspan="3">
                                        <i class="fa fa-calculator"></i> <strong>ANÁLISE GERAL de PREÇOS: </strong>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0101DF"><a href="#" data-toggle="modal" data-target="#modal_analise_geral_daCotacao" onClick="CarregarItensCotadosGeralPorFornecedor(@ViewBag.idCotacao)" style="text-decoration:none"><i class="fa fa-search"></i> Ver Análise Geral</a></font>
                                    </th>
                                </tr>
                            </thead>

                            <!-- Exibe o Grid com a lista dos PRODUTOS cotados -->
                            @{
                                Html.RenderPartial("GridItensCotados");
                            }
                        </table>
                        <br />
                    </div>

                    <div role="tabpanel" class="" id="listaDeFornecedoresCotados">
                        <table id="lista_fornecedores_cotacao" class="table table-striped table-ordered table-bordered col-md-4">
                                <thead>
                                    <tr style="background-color: #e8e8e8;">
                                        <th align="center" colspan="5">
                                            <i class="fa fa-pencil-square"></i> <strong>FORNECEDORES RESPONDENDO: </strong>
                                        </th>
                                    </tr>
                                </thead>

                                <!-- Exibe o Grid com a lista dos FORNECEDORES cotados -->
                                @{
                                    Html.RenderPartial("GridFornecedoresCotados");
                                }
                        </table>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<!-- /#page-content-wrapper -->
<!-- /#wrapper -->
<!-- jQuery (necessário para os plugins do Bootstrap) -->

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script type="text/javascript">
        $(document).ready(function () {
            //Desabilitar botão direito do mouse
            $(document).bind("contextmenu", function (e) {
                //return false;
            });

            //Desabilitando os campos de identificação da COTAÇÃO
            $('#NOME_COTACAO_ENVIADA').attr('readonly', true);
            $('#CATEGORIA_COTACAO_ENVIADA').attr('readonly', true);
            $('#TIPO_COTACAO_ENVIADA').attr('readonly', true);
            $('#PERCENTUAL_RESPONDIDA_COTACAO_ENVIADA').attr('readonly', true);
            $('#STATUS_COTACAO_ENVIADA').attr('readonly', true);
            $('#DATA_CRIACAO_COTACAO_ENVIADA').attr('readonly', true);
            $('#DATA_ENCERRAMENTO_COTACAO_ENVIADA').attr('readonly', true);

            $("#linkSair").attr('tabindex', '-1');

            //Armazena o ID da EMPRESA FORNECEDORA e EXIBE RESPOSTAS das PERGUNTAS
            $(".verResposta").click(function () {
                var idCotacaoFilha = "#inIdCotacaoFilha_" + $(this).attr('id');
                var temFotosDeProdutosAlternativos = "";

                $('#ID_FORNECEDOR_COTACAO_ANALISADA').val($(this).attr('id'));

                $("#texto_chat_principal").hide();
                $('#dialogo_entre_cotante_efornecedor td').parent().remove(); //Limpar / Remover linha

                //Carregar resultado cotado com o FORNECEDOR
                $.ajax({
                    type: "POST",
                    url: "/UsuarioCotante/CarregarRespostaDaCotacao",
                    dataType: "json",
                    data: {
                        'idCotacaoFilha': $(idCotacaoFilha).val(),
                        'tipoCotacao': "uc"
                    },
                    success: function (data) {
                        //LIMPA as linhas da TABLE, preparando para uma nova montagem
                        $('#resposta_do_fornecedor td').parent().remove();

                        $.each(data, function (index, resposta) {
                            debugger;

                            if (parseInt(resposta.quantidade_imagens_anexadas) > 0) {
                                temFotosDeProdutosAlternativos = "ver produto similar";
                            }

                            $('<tr>' +
                                '<td width="40%" align="left">&nbsp;' + resposta.nome_produto + '</td>' +
                                '<td width="10%" align="right">&nbsp;' + resposta.quantidade_produto_exibicao + '</td>' +
                                '<td width="10%" align="right">&nbsp;' + resposta.valor_produto + '</td>' +
                                '<td width="10%" align="right">&nbsp;' + resposta.total_por_produto + '</td>' +
                                '<td width="10%" align="center">&nbsp;</td>' +
                                '<td width="20%" align="center">&nbsp;<a href="#" id="" class="similares" data-toggle="modal" data-target="#modal_produtos_alternativos" onClick="ver_alternativos(' + resposta.id_codigo_cotacao_filha_negociacao + ',' + $(idCotacaoFilha).val() + ')">' + temFotosDeProdutosAlternativos + '</a></td>' +
                                '</tr>').appendTo('#resposta_do_fornecedor');

                            temFotosDeProdutosAlternativos = "";
                        });
                    }
                });

                //Carregar DIÁLOGO do COTANTE com o FORNECEDOR
                $.ajax({
                    type: "POST",
                    url: "/UsuarioCotante/CarregarDialogoEntreCotanteEFornecedor",
                    dataType: "json",
                    data: {
                        'idCotacaoFilha': $(idCotacaoFilha).val()
                    },
                    success: function (data) {
                        var quantosDialogos = data.length;
                        var contadorMsg = 1;

                        if (quantosDialogos > 0) {
                            $.each(data, function (index, chat) {

                                //Inserir no Grid
                                if (contadorMsg & 1) {
                                    $('<table><tr><td width="2%"></td><td width="90%"><font color="#337ab7"><i class="fa fa-comment fa-2x"></i> </font><font color="#000000">' + chat.texto_chat + '</font></td></tr></table>').appendTo('#dialogo_entre_cotante_efornecedor');
                                } else {
                                    $('<table><tr style="border-style: dotted; border-bottom-width: 1px; border-top-width: 0; border-right-width: 0; border-left-width: 0; border-bottom-color: #C0C0C0;"><td><font color="#FFFFFF">vazio</font></td><td></td><td width="100%"><font color=""><i class="fa fa-comments fa-2x"></i> </font><font color="#000000">' + chat.texto_chat + '<font color="#A9A9A9"> - ' + chat.data_chat + '</font></font></td></tr></table>').appendTo('#dialogo_entre_cotante_efornecedor');
                                }

                                contadorMsg = (parseInt(contadorMsg) + parseInt(1));
                            });

                            //Controla todo o processo de CHAT
                            if (quantosDialogos & 1) {
                                //Habilita campo para PERGUNTA / RESPOSTA
                                $("#texto_chat_alternativo").hide();
                            }
                            else {
                                //Desabilita campo para PERGUNTA / RESPOSTA
                                $("#texto_chat_alternativo").show();
                            }
                        }
                        else {
                            //Habilita campo para PERGUNTA / RESPOSTA
                            $("#texto_chat_alternativo").show();
                        }
                    }
                });

            });

            //Desabilita / Habilita o campo para digitação do texto de PERGUNTA / RESPOSTA
            $("#TEXTO_CHAT_COTACAO_USUARIO_COTANTE_ALTERNATIVO").focus(function () {
                $("#texto_chat_alternativo").hide();
                $("#texto_chat_principal").show();
                $("#botao_enviar").show();

                $("#TEXTO_CHAT_COTACAO_USUARIO_COTANTE").val('');
                $("#TEXTO_CHAT_COTACAO_USUARIO_COTANTE").focus();
            });

            $("#TEXTO_CHAT_COTACAO_USUARIO_COTANTE").focus(function () {
                $("#botao_enviar").show();
            });

            //Registra a PERGUNTA ou RESPOSTA, enviando-a ao FORNECEDOR COTADO
            $("#enviarPerguntaOuResposta").click(function () {
                if ($("#TEXTO_CHAT_COTACAO_USUARIO_COTANTE").val() != '') {

                    debugger;
                    idFornecedor = $('#ID_FORNECEDOR_COTACAO_ANALISADA').val();
                    idCotacaoFilha = "#inIdCotacaoFilha_" + idFornecedor;
                    textoPerguntaOuResposta = $("#TEXTO_CHAT_COTACAO_USUARIO_COTANTE").val();

                    $.ajax({
                        url: "/UsuarioCotante/EnviarComunicacaoAoFornecedorNaCotacao",
                        dataType: 'json',
                        cache: false,
                        async: true,
                        data: {
                            'idCotacaoFilha': $(idCotacaoFilha).val(), 'idEmpresaCotada': idFornecedor, 'textoPerguntaOuResposta': textoPerguntaOuResposta
                        },
                        success: function (data) {
                            //debugger;
                            $("#texto_chat_principal").val('');
                            $("#texto_chat_principal").hide();
                            $("#texto_chat_alternativo").hide();
                            $("#botao_enviar").hide();
                            $('#dialogo_entre_cotante_efornecedor td').parent().remove(); //Limpar / Remover linha

                            //Carregar DIÁLOGO do COTANTE com o FORNECEDOR
                            $.ajax({
                                type: "POST",
                                url: "/UsuarioCotante/CarregarDialogoEntreCotanteEFornecedor",
                                dataType: "json",
                                data: {
                                    'idCotacaoFilha': $(idCotacaoFilha).val()
                                },
                                success: function (data) {
                                    var quantosDialogos = data.length;
                                    var contadorMsg = 1;

                                    if (quantosDialogos > 0) {
                                        $.each(data, function (index, chat) {

                                            //Inserir no Grid
                                            if (contadorMsg & 1) {
                                                $('<table><tr><td width="2%"></td><td width="90%"><font color="#337ab7"><i class="fa fa-comment fa-2x"></i> </font><font color="#000000">' + chat.texto_chat + '</font></td></tr></table>').appendTo('#dialogo_entre_cotante_efornecedor');

                                                //Muda STATUS do CHAT (informa que não há novas mensagens)
                                                $("#bonecoChat_" + idFornecedor).css({ "color": "#23527c" });
                                            } else {
                                                $('<table><tr style="border-style: dotted; border-bottom-width: 1px; border-top-width: 0; border-right-width: 0; border-left-width: 0; border-bottom-color: #C0C0C0;"><td><font color="#FFFFFF">vazio</font></td><td></td><td width="100%"><font color=""><i class="fa fa-comments fa-2x"></i> </font><font color="#000000">' + chat.texto_chat + '<font color="#A9A9A9"> - ' + chat.data_chat + '</font></font></td></tr></table>').appendTo('#dialogo_entre_cotante_efornecedor');

                                                //Muda STATUS do CHAT (informa que há novas mensagens)
                                                $("#bonecoChat_" + idFornecedor).css({ "color": "#FF0000" });
                                            }

                                            contadorMsg = (parseInt(contadorMsg) + parseInt(1));
                                        });

                                        //Controla todo o processo de CHAT
                                        if (quantosDialogos & 1) {
                                            //Habilita campo para PERGUNTA / RESPOSTA
                                            $("#texto_chat_alternativo").hide();
                                        }
                                        else {
                                            //Desabilita campo para PERGUNTA / RESPOSTA
                                            $("#texto_chat_alternativo").show();
                                        }
                                    }
                                    else {
                                        //Habilita campo para PERGUNTA / RESPOSTA
                                        $("#texto_chat_alternativo").show();
                                    }
                                }
                            });
                        }
                    });
                }
                else {
                    alert("ATENÇÃO!!\n\nDigite a PERGUNTA ou RESPOSTA a ser encaminhada ao vendedor!");

                    $("#TEXTO_CHAT_COTACAO_USUARIO_COTANTE").val('');
                    $("#TEXTO_CHAT_COTACAO_USUARIO_COTANTE").focus();
                }
            });

            //Contador REGRESSIVO de caracteres do campo TEXTAREA
            $(document).on("input", "#TEXTO_CHAT_COTACAO_USUARIO_COTANTE", function () {
                var limite = 200;
                var informativo = " caracteres restantes";
                var caracteresDigitados = $(this).val().length;
                var caracteresRestantes = (limite - caracteresDigitados);

                if (caracteresRestantes <= 0) {
                    var comentario = $("#TEXTO_CHAT_COTACAO_USUARIO_COTANTE").val();
                    $("#TEXTO_CHAT_COTACAO_USUARIO_COTANTE").val(comentario.substr(0, limite));
                    $(".caracteres").text("0 " + informativo);
                } else {
                    $(".caracteres").text(caracteresRestantes + " " + informativo);
                }
            });

            //HABILITA / DESABILITA campos do CHAT
            $(".habiliteCampo").click(function () {
                $("#texto_chat_principal").val('');
                $("#texto_chat_principal").hide();
                $("#botao_enviar").hide();

                $('#ID_FORNECEDOR_COTACAO_ANALISADA').val('');
            });
        });

        //EXIBIR as fotos de produtos alternativos anexados à cotação
        function ver_alternativos(idCotacaoFilhaNegociacao, idCotacaoFilha) {
            debugger;
            var linkImagem = "";

            $.ajax({
                type: "POST",
                url: "/UsuarioCotante/CarregarFotosDosProdutosAlternativos",
                dataType: "json",
                data: {
                    'idCotacaoFilhaNegociacao': idCotacaoFilhaNegociacao,
                    'idCotacaoFilha': idCotacaoFilha,
                    'tipoCotacao': "ec"
                },
                success: function (data) {
                    //LIMPA as linhas da TABLE, preparando para uma nova montagem
                    $("#bullets_produtos").empty();
                    $("#imagens_produtos_alternativos").empty();

                    debugger;

                    if (parseInt(data.quantidade_imagens_anexadas) > 0) {
                        var listaDeFotos = data.fotos_produtos_alternativos.split(",");
                        var conteudoBullets = "";
                        var conteudoListaFotos = "<div class='item active'>";

                        //MONTAR HTML para exibição de FOTOS no SLIDER
                        for (var b = 0; b < listaDeFotos.length; b++) {
                            //MONTANDO LISTA de FOTOS
                            linkImagem = '@Url.Content("~/Content/imagensProdutosAlternativos/")' + listaDeFotos[b];

                            if (conteudoListaFotos == "<div class='item active'>") {
                                conteudoListaFotos = (conteudoListaFotos + '<img src="' + linkImagem + '" ></div>');
                            }
                            else {
                                conteudoListaFotos = (conteudoListaFotos + '<div class="item"><img src="' + linkImagem + '" ></div>');
                            }

                            //MONTANDO os BULLETS (Navegadores)
                            if (b == 0) {
                                conteudoBullets = "<li data-target='#meuSlider' data-slide-to='0' class='active'></li>";
                            }
                            else {
                                conteudoBullets = (conteudoBullets + '<li data-target="#meuSlider" data-slide-to="' + b + '"></li>');
                            }
                        }

                        $("#bullets_produtos").append(conteudoBullets);
                        $("#imagens_produtos_alternativos").append(conteudoListaFotos);
                    }
                }
            });
        }

        //CARREGAR determinado ITEM com os preços fornecidos por TODOS os FORNECEDORES que receberam a COTAÇÂO
        function CarregarItensCotadosPorFornecedor(idCotacaoMaster,idCodigoProduto) {
            debugger;

            //Carregar resultado cotado com o FORNECEDOR
            var temFotosDeProdutosAlternativos = "";

            $.ajax({
                type: "POST",
                url: "/UsuarioCotante/CarregarRespostaDaCotacaoPorProduto",
                dataType: "json",
                data: {
                    'idCotacaoMaster': idCotacaoMaster,
                    'idCodigoProduto': idCodigoProduto,
                    'tipoCotacao': "uc"
                },
                success: function (data) {
                    debugger;

                    var dataResposta = "";
                    var formaPagamento = "";
                    var observacaoCotacao = "";

                    //LIMPA as linhas da TABLE, preparando para uma nova montagem
                    $('#resposta_do_fornecedor_por_produto td').parent().remove();

                    $.each(data, function (index, resposta) {
                        debugger

                        //if (parseInt(resposta.quantidade_imagens_anexadas) > 0) {
                        //    temFotosDeProdutosAlternativos = "ver similar";
                        //}

                        if (resposta.menor_valor == "sim") {
                            $('<tr>' +
                                '<td width="3%" style="text-align:center"><a href="#1" id="ancor_abrirItens_' + idCodigoProduto + '" onClick="subGridExibirInformacoesCotacao(' + idCodigoProduto + ')"><img style="" id="img_abrir" src="@Url.Content("~/Content/images/icones/details_open.png")"></a><a href="#2" id="ancor_fecharItens_' + idCodigoProduto + '" onClick="subGridExibirInformacoesCotacao(' + idCodigoProduto + ')" style="display:none;"><img style="" id="img_fechar" src="@Url.Content("~/Content/images/icones/details_close.png")"></a><font color="#337ab7"></font>&nbsp;</td>' +
                                '<td width="25%" align="left">&nbsp;<font color="#337ab7"><b>' + resposta.nome_produto + '</font></b></td>' +
                                '<td width="10%" align="right"><font color="#337ab7"><b>' + resposta.quantidade_produto_exibicao + '&nbsp;</font></b></td>' +
                                '<td width="10%" align="right"><font color="#337ab7"><b>' + resposta.valor_produto + '&nbsp;</font></b></td>' +
                                '<td width="10%" align="right"><font color="#337ab7"><b>' + resposta.total_por_produto + '&nbsp;</font></b></td>' +
                                '<td width="5%" align="center"><font color="#337ab7"><b>' + resposta.percentual_desconto + '%&nbsp;</font></b></td>' +
                                '<td width="10%" align="right" class="menorValorProduto"><font color="#337ab7"><b>' + resposta.total_por_produto_com_desconto + '&nbsp;</font></b></td>' +
                                '<td width="20%" align="right"><font color="#337ab7"<b>' + resposta.empresa_cotada + '</font></b></td>' +
                                '<td width="7%" align="center"><a href="#" title="Menor Preço"><font color=green><i class="fa fa-check"></i></font></a></td>' +
                                '<input type="hidden" id="estadoSubgridItens_' + idCodigoProduto + '" value="0" />' +
                              '</tr>').appendTo('#resposta_do_fornecedor_por_produto');

                                dataResposta = resposta.data_resposta;
                                formaPagamento = resposta.forma_pagamento;
                                observacaoCotacao = resposta.observacao;
                                tipoDeFrete = resposta.tipoFrete;
                                var idCotacaoFilha = resposta.id_cotacao_filha;
                                var idProdutoRespondido = resposta.id_codigo_cotacao_filha_negociacao;

                                var linhaRodape =   '<tr bgcolor="#F5F5F5" id="linhaSubGridPorProduto1_' + idCodigoProduto + '" style="display:none;">' +
                                                      '<td width="3%" style="border-bottom:1px;">&nbsp;</th>' +
                                                      '<td width="25%" align="left" style="border-bottom:1px;"><b>Respondida em:<b></td>' +
                                                      '<td width="10%" align="left" style="border-bottom:1px;">' + dataResposta + '</td>' +
                                                      '<td width="10%" align="right" style="border-bottom:1px;"></td>' +
                                                      '<td width="10%" align="right" style="border-bottom:1px;"></td>' +
                                                      '<td width="5%" align="center" style="border-bottom:1px;"></td>' +
                                                      '<td width="10%" align="right" style="border-bottom:1px;">&nbsp;</td>' +
                                                      '<td width="20%" align="right" style="border-bottom:1px;">&nbsp;</td>' +
                                                      '<td width="7%" align="center">&nbsp;</td>' +
                                                    '</tr>' +
                                                    '<tr bgcolor="#F5F5F5" id="linhaSubGridPorProduto2_' + idCodigoProduto + '" style="display:none;">' +
                                                      '<td width="3%" style="border-top:1px;">&nbsp;</th>' +
                                                      '<td width="20%" align="left" style="border-bottom:1px;"><b>Forma Pgto:<b></td>' +
                                                      '<td width="10%" align="left" style="border-bottom:1px;">' + formaPagamento + '</td>' +
                                                      '<td width="10%" align="right" style="border-bottom:1px;"></td>' +
                                                      '<td width="10%" align="right" style="border-bottom:1px;">&nbsp;</td>' +
                                                      '<td width="5%" align="center" style="border-bottom:1px;"></td>' +
                                                      '<td width="10%" align="right" style="border-bottom:1px;"><b>Frete:<b></td>' +
                                                      '<td width="20%" align="right" style="border-bottom:1px;">' + tipoDeFrete + '</td>' +
                                                      '<td width="12%" align="center">' +
                                                                '<button type="button" class="btn btn-danger btn-sm" id="ancor_pedido_' + idCodigoProduto + '" style="display: none;" onClick="FazerPedido(' + idCotacaoFilha + ', 2,' + idCotacaoMaster + ',' + idProdutoRespondido + ',' + 'this' + ',' + idCodigoProduto + ')">Fazer Pedido</button>' +
                                                                '<button type="button" class="btn btn-success btn-sm" id="pedido_' + idCodigoProduto + '" style="display: none;">PEDIDO REALIZADO</button>' +
                                                      '</td>' +
                                                    '</tr>' +
                                                    '<tr bgcolor="#F5F5F5" id="linhaSubGridPorProduto3_' + idCodigoProduto + '" style="display:none;">' +
                                                      '<td width="3%" style="border-bottom:1px solid black;">&nbsp;</th>' +
                                                      '<td width="28%" align="left" style="border-bottom:1px solid black;"><b>Observação:<b></td>' +
                                                      '<td width="" align="left" style="border-bottom:1px solid black;" colspan="7">' + observacaoCotacao + '</td>' +
                                                    '</tr>';

                                                    $('#resposta_do_fornecedor_por_produto').append(linhaRodape);
                        }
                        else {
                            $('<tr>' +
                                '<td width="3%">&nbsp;</td>' +
                                '<td width="25%" align="left">&nbsp;' + resposta.nome_produto + '</td>' +
                                '<td width="10%" align="right">' + resposta.quantidade_produto_exibicao + '&nbsp;</td>' +
                                '<td width="10%" align="right">' + resposta.valor_produto + '&nbsp;</td>' +
                                '<td width="10%" align="right">' + resposta.total_por_produto + '&nbsp;</td>' +
                                '<td width="5%" align="center"><b>' + resposta.percentual_desconto + '%&nbsp;</b></td>' +
                                '<td width="10%" align="right">' + resposta.total_por_produto_com_desconto + '&nbsp;</td>' +
                                '<td width="20%" align="right">' + resposta.empresa_cotada + '</td>' +
                                '<td width="10%" align="center">&nbsp;</td>' +
                                '<input type="hidden" id="estadoSubgridItens_' + idCodigoProduto + '" value="0" />' +
                              '</tr>').appendTo('#resposta_do_fornecedor_por_produto');
                        }

                        temFotosDeProdutosAlternativos = "";
                    });
                }
            });
        }

        //CARREGAR determinado ITEM com os preços fornecidos por TODOS os FORNECEDORES que receberam a COTAÇÂO
        function CarregarItensCotadosGeralPorFornecedor(idCotacaoMaster) {
            debugger;

            //CARREGAR LISTA DATATABLES de FORNECEDORES COTADOS para esta COTAÇÃO
            $('#gridProdutosCotadosAnaliseGeral body').empty();

            $.ajax({
                type: "POST",
                url: "/UsuarioCotante/CarregarEmpresasCotadasPeloUsuarioCotante",
                dataType: "json",
                data: {
                    'idCotacaoMaster': idCotacaoMaster,
                    'tipoCotacao': "uc"
                },
                success: function (data) {
                    debugger;

                    //LIMPA as linhas da TABLE, preparando para uma nova montagem
                    $('#gridProdutosCotadosAnaliseGeral td').parent().remove();
                        debugger

                        if (data.length > 0) {
                            //MONTAR a Lista de ITENS de SERVIÇO do ORÇAMENTO
                            $.each(data, function (index, itens) {
                                debugger;

                                if (itens.menor_valor == "sim") {
                                    var linha = '<tr>' +
                                                    '<td width="3%" style="text-align:center"><a href="#1" id="ancor_abrir_' + itens.ID_CODIGO_COTACAO_FILHA_USUARIO_COTANTE + '" valorMenor="' + itens.menor_valor + '" onClick="subGridExibirItensCotados(' + itens.ID_CODIGO_COTACAO_FILHA_USUARIO_COTANTE + ',' + idCotacaoMaster + ')"><img style="" id="img_abrir" src="@Url.Content("~/Content/images/icones/details_open.png")"></a><a href="#2" id="ancor_fechar_' + itens.ID_CODIGO_COTACAO_FILHA_USUARIO_COTANTE + '" onClick="subGridExibirItensCotados(' + itens.ID_CODIGO_COTACAO_FILHA_USUARIO_COTANTE + ',' + idCotacaoMaster + ')" style="display:none;"><img style="" id="img_fechar" src="@Url.Content("~/Content/images/icones/details_close.png")"></a><font color="#337ab7"></font>&nbsp;</td>' +
                                                    '<td width="30%" style="text-align:left"><font color="#337ab7"><b>' + itens.EMPRESA_QUE_RESPONDEU + '</b>&nbsp;&nbsp;</font></td>' +
                                                    '<td width="5%" style="text-align:center"><font color="#337ab7"><b>' + itens.COTOU_TOTAL_PARCIAL + '</b></font></td>' +
                                                    '<td width="10%" style="text-align:right"><font color="#337ab7"><b>' + mascaraValor(itens.VALOR_TOTAL_COTACAO_SEM_DESCONTO.toFixed(2)) + '</b></font></td>' +
                                                    '<td width="5%"  style="text-align:right"><font color="#337ab7"><b>' + mascaraValor(itens.PERCENTUAL_DESCONTO.toFixed(2)) + '</b></font></td>' +
                                                    '<td width="10%" style="text-align:center"><font color="#337ab7"><b>' + itens.TIPO_DESCONTO + '</b></font></td>' +
                                                    '<td width="10%" style="text-align:right"><font color="#337ab7"><b>' + mascaraValor(itens.VALOR_DESCONTO.toFixed(2)) + '</b></font></td>' +
                                                    '<td width="10%" style="text-align:right"><font color="#337ab7"><b>' + mascaraValor(itens.VALOR_TOTAL_COTACAO_COM_DESCONTO.toFixed(2)) + '</b></font></td>' +
                                                    '<td width="10%" style="text-align:center"><a href="#" title="Menor Preço"><font color=green><i class="fa fa-check"></i></font></a><button type="button" class="btn btn-success btn-xs" style="display: none;">FOI PEDIDO</button></td>' +
                                                    '<td width="7%" style="text-align:center">&nbsp;</td>' +
                                                    '<input type="hidden" id="estadoSubgrid_' + itens.ID_CODIGO_COTACAO_FILHA_USUARIO_COTANTE + '" value="0" />' +
                                                '</tr>' +
                                                '<tr id="linhaSubGrid_' + itens.ID_CODIGO_COTACAO_FILHA_USUARIO_COTANTE + '" style="display:none;">' +
                                                    '<td colspan="10">' +
                                                        '<table class="table" id="subSubGrid_' + itens.ID_CODIGO_COTACAO_FILHA_USUARIO_COTANTE + '" cellspacing="0" width="100%" >' +
                                                        '<thead style="background-color: #337ab7">' +
                                                            '<td width="3%">&nbsp;</td>' +
                                                            '<td width="28%" align="left"><font color="#FFFFFF"><b>Produto</b></font></td>' +
                                                            '<td width="10%" align="center"><font color="#FFFFFF">&nbsp;<b>Quant.</b></font></td>' +
                                                            '<td width="10%" align="right"><font color="#FFFFFF"><b>R$ Unit.</b></font></td>' +
                                                            '<td width="15%" align="right"><font color="#FFFFFF"><b>R$ s/ Desc.</b></font></td>' +
                                                            '<td width="15%" align="right"><font color="#FFFFFF"><b>R$ c/ Desc.</b></font></td>' +
                                                            '<td width="10%" align="">&nbsp;</td>' +
                                                            '<td width="10%" align="">&nbsp;</td>' +
                                                            '<tbody></tbody>' +
                                                        '</thead>' +
                                                        '</table>' +
                                                    '</td>' +
                                                '</tr>';
                                }
                                else {
                                    var linha = '<tr>' +
                                                    '<td width="3%" style="text-align:center"><a href="#1" id="ancor_abrir_' + itens.ID_CODIGO_COTACAO_FILHA_USUARIO_COTANTE + '" valorMenor="" onClick="subGridExibirItensCotados(' + itens.ID_CODIGO_COTACAO_FILHA_USUARIO_COTANTE + ',' + idCotacaoMaster + ')"><img style="" id="img_abrir" src="@Url.Content("~/Content/images/icones/details_open.png")"></a><a href="#2" id="ancor_fechar_' + itens.ID_CODIGO_COTACAO_FILHA_USUARIO_COTANTE + '" onClick="subGridExibirItensCotados(' + itens.ID_CODIGO_COTACAO_FILHA_USUARIO_COTANTE + ',' + idCotacaoMaster + ')" style="display:none;"><img style="" id="img_fechar" src="@Url.Content("~/Content/images/icones/details_close.png")"></a><font color="#337ab7"></font>&nbsp;</td>' +
                                                    '<td width="30%" style="text-align:left"><font color="#337ab7">' + itens.EMPRESA_QUE_RESPONDEU + '&nbsp;&nbsp;</font></td>' +
                                                    '<td width="5%" style="text-align:center"><font color="#337ab7">' + itens.COTOU_TOTAL_PARCIAL + '</font></td>' +
                                                    '<td width="10%" style="text-align:right"><font color="#337ab7">' + mascaraValor(itens.VALOR_TOTAL_COTACAO_SEM_DESCONTO.toFixed(2)) + '</font></td>' +
                                                    '<td width="10%"  style="text-align:right"><font color="#337ab7">' + mascaraValor(itens.PERCENTUAL_DESCONTO.toFixed(2)) + '</font></td>' +
                                                    '<td width="10%" style="text-align:center"><font color="#337ab7"><b>' + itens.TIPO_DESCONTO + '</b></font></td>' +
                                                    '<td width="10%" style="text-align:right"><font color="#337ab7">' + mascaraValor(itens.VALOR_DESCONTO.toFixed(2)) + '</font></td>' +
                                                    '<td width="10%" style="text-align:right"><font color="#337ab7">' + mascaraValor(itens.VALOR_TOTAL_COTACAO_COM_DESCONTO.toFixed(2)) + '</font></td>' +
                                                    '<td width="10%" style="text-align:center">&nbsp;</td>' +
                                                    '<td width="2%" style="text-align:center">&nbsp;</td>' +
                                                    '<input type="hidden" id="estadoSubgrid_' + itens.ID_CODIGO_COTACAO_FILHA_USUARIO_COTANTE + '" value="0" />' +
                                                '</tr>' +
                                                '<tr id="linhaSubGrid_' + itens.ID_CODIGO_COTACAO_FILHA_USUARIO_COTANTE + '" style="display:none;">' +
                                                    '<td colspan="10">' +
                                                        '<table class="table" id="subSubGrid_' + itens.ID_CODIGO_COTACAO_FILHA_USUARIO_COTANTE + '" cellspacing="0" width="100%" >' +
                                                        '<thead style="background-color: #337ab7">' +
                                                            '<td width="3%">&nbsp;</td>' +
                                                            '<td width="28%" align="left"><font color="#FFFFFF"><b>Produto</b></font></td>' +
                                                            '<td width="10%" align="center"><font color="#FFFFFF">&nbsp;<b>Quant.</b></font></td>' +
                                                            '<td width="10%" align="right"><font color="#FFFFFF"><b>R$ Unit.</b></font></td>' +
                                                            '<td width="15%" align="right"><font color="#FFFFFF"><b>R$ s/ Desc.</b></font></td>' +
                                                            '<td width="15%" align="right"><font color="#FFFFFF"><b>R$ c/ Desc.</b></font></td>' +
                                                            '<td width="10%" align="">&nbsp;</td>' +
                                                            '<td width="10%" align="">&nbsp;</td>' +
                                                        '</thead>' +
                                                        '<tbody></tbody>' +
                                                        '</table>' +
                                                    '</td>' +
                                                '</tr>';
                                }

                                $('#gridProdutosCotadosAnaliseGeral').append(linha);
                            });
                        }
                }
            });
        }

        //Formatar MONETÁRIO para exibição no GRID
        function mascaraValor(valor) {
            valor = valor.toString().replace(/\D/g, "");
            valor = valor.toString().replace(/(\d)(\d{8})$/, "$1.$2");
            valor = valor.toString().replace(/(\d)(\d{5})$/, "$1.$2");
            valor = valor.toString().replace(/(\d)(\d{2})$/, "$1,$2");
            return valor
        }

        //==========================================================================
        //ABRE e FECHA o Sub-Grid para exibição dos PRODUTOS COTADOS e os valores RESPONDIDOS
        function subGridExibirItensCotados(idCotacaoFilha,idCotacaoMaster) {
            debugger;

            var menorCotacao = $('#ancor_abrir_' + idCotacaoFilha).attr('valorMenor');

            if ($('#estadoSubgrid_' + idCotacaoFilha).val() == 0) {
                $('#estadoSubgrid_' + idCotacaoFilha).val(1);

                $('#ancor_abrir_' + idCotacaoFilha).hide();
                $('#ancor_fechar_' + idCotacaoFilha).show();

                //ABRIR Sub-Grid ALTERNATIVO
                $('#linhaSubGrid_' + idCotacaoFilha).show();

                ////EXIBIR botão de PEDIDO
                //$('#ancor_pedido_' + idCotacaoFilha).show();

                //CARREGAR o FLUXO de INSUMOS
                $.ajax({
                    type: 'POST',
                    url: '/UsuarioCotante/CarregarItensCotadosPorFornecedorParaAnaliseEPedido',
                    dataType: 'json',
                    cache: false,
                    async: true,
                    data: {
                        'idCotacaoFilha': idCotacaoFilha,
                        'tipoCotacao': "uc"
                    },
                    success: function (data) {
                        debugger;

                        var corFudoDaLinha = "FFFFFF";
                        var somaTotalSemDesconto = 0;
                        var somaTotalComDesconto = 0;
                        var contador = 0;
                        var dataResposta = "";
                        var formaPagamento = "";
                        var observacaoCotacao = "";
                        var tipoDeFrete = "";

                        if (data.length > 0) {
                            //LIMPANDO do SubSubGrid
                            $('#subSubGrid_' + idCotacaoFilha + '  tbody').empty();

                            //IMPRIMIR a LISTA de INSUMOS do FLUXO
                            $.each(data, function (index, itens) {
                                debugger;

                                var linhaSubGrid = '<tr bgcolor="#' + corFudoDaLinha + '">' +
                                                        '<td width="3%">&nbsp;</td>' +
                                                        '<td width="28%" align="left"><font color="">' + itens.nome_produto + '</font></td>' +
                                                        '<td width="10%"  align="center"><font color="">' + itens.quantidade_produto_exibicao + '</font></td>' +
                                                        '<td width="10%" align="right"><font color="">' + itens.valor_produto + '</font></td>' +
                                                        '<td width="15%" align="right"><font color="">' + itens.total_por_produto + '</font></td>' +
                                                        '<td width="15%" align="right"><font color="">' + itens.total_por_produto_com_desconto + '</font></td>' +
                                                        '<td width="10%" align="center"><font color="">&nbsp;</font></td>' +
                                                        '<td width="10%" align="center">&nbsp;</td>' +
                                                      '</tr>';

                                $('#subSubGrid_' + idCotacaoFilha).append(linhaSubGrid);

                                //LINHAS ZEBRADAS - Alternancia das cores das linhas
                                if (corFudoDaLinha == "F5F5F5") {
                                    corFudoDaLinha = "FFFFFF";
                                }
                                else {
                                    corFudoDaLinha = "F5F5F5";
                                }

                                somaTotalSemDesconto = itens.total_produtos_sem_desconto;
                                somaTotalComDesconto = itens.total_produtos_com_desconto;

                                dataResposta = itens.data_resposta;
                                formaPagamento = itens.forma_pagamento;
                                observacaoCotacao = itens.observacao;
                                tipoDeFrete = itens.tipoFrete;
                            });

                            var linhaRodaPeSubTotais = '<tr>' +
                                                           '<td width="3%" style="border-top:1px solid black;">&nbsp;</th>' +
                                                           '<td width="28%" align="left" style="border-top:1px solid black;">&nbsp;</td>' +
                                                           '<td width="10%" align="center" style="border-top:1px solid black;">&nbsp;</td>' +
                                                           '<td width="10%" align="right" style="border-top:1px solid black;"><b>Total:</b></td>' +
                                                           '<td width="15%" align="right" style="border-top:1px solid black;"><b>' + mascaraValor(somaTotalSemDesconto.toFixed(2)) + '</b></td>' +
                                                           '<td width="15%" align="right" style="border-top:1px solid black;" class="menorValorTodoPedido"><b>' + mascaraValor(somaTotalComDesconto.toFixed(2)) + '</b></td>' +
                                                           '<td width="10%" align="center" style="border-top:1px solid black;">&nbsp;</td>' +
                                                           '<td width="10%" align="center" style="border-top:1px solid black;">&nbsp;</td>' +
                                                       '</tr>';
                            $('#subSubGrid_' + idCotacaoFilha).append(linhaRodaPeSubTotais);

                            var linhaRodapeDadosDoPedido = '<tr bgcolor="#F5F5F5">' +
                                                               '<td width="3%" style="border-bottom:1px;">&nbsp;</th>' +
                                                               '<td width="28%" align="left" style="border-bottom:1px;"><b>Respondida em:<b></td>' +
                                                               '<td width="10%" align="left" style="border-bottom:1px;">' + dataResposta + '</td>' +
                                                               '<td width="10%" align="right" style="border-bottom:1px;"></td>' +
                                                               '<td width="15%" align="right" style="border-bottom:1px;"></td>' +
                                                               '<td width="15%" align="right" style="border-bottom:1px;"></td>' +
                                                               '<td width="10%" align="center" style="border-bottom:1px;">&nbsp;</td>' +
                                                               '<td width="10%" align="center" style="border-bottom:1px;">&nbsp;</td>' +
                                                           '</tr>' +
                                                           '<tr bgcolor="#F5F5F5">' +
                                                               '<td width="3%" style="border-top:1px;">&nbsp;</th>' +
                                                               '<td width="28%" align="left" style="border-bottom:1px;"><b>Forma Pgto:<b></td>' +
                                                               '<td width="10%" align="left" style="border-bottom:1px;">' + formaPagamento + '</td>' +
                                                               '<td width="10%" align="right" style="border-bottom:1px;"><b>Frete:<b></td>' +
                                                               '<td width="15%" align="right" style="border-bottom:1px;">' + tipoDeFrete + '</td>' +
                                                               '<td width="15%" align="center" style="border-bottom:1px;"></td>' +
                                                               '<td width="20%" align="center" style="border-bottom:1px;">' +
                                                                    '<button type="button" class="btn btn-danger btn-sm" id="ancor_pedido_' + idCotacaoFilha + '" style="display: none;" onClick="FazerPedido(' + idCotacaoFilha + ', 1,' + idCotacaoMaster + ',' + '0' + ',' + 'this' + ',' + '' + ')">Fazer Pedido</button>' +
                                                                    '<button type="button" class="btn btn-success btn-sm" id="pedido_' + idCotacaoFilha + '" style="display: none;">PEDIDO REALIZADO</button>' +
                                                               '</td>' +
                                                               '<td>&nbsp;</td>'
                                                           '</tr>' +
                                                           '<tr bgcolor="#F5F5F5">' +
                                                               '<td width="3%" style="border-bottom:1px solid black;">&nbsp;</th>' +
                                                               '<td width="28%" align="left" style="border-bottom:1px solid black;"><b>Observação:<b></td>' +
                                                               '<td width="" align="left" style="border-bottom:1px solid black;" colspan="6">' + observacaoCotacao + '</td>' +
                                                           '</tr>';

                            $('#subSubGrid_' + idCotacaoFilha).append(linhaRodapeDadosDoPedido);

                            if (menorCotacao == "sim") {
                                $("#ancor_pedido_" + idCotacaoFilha).show();
                            }
                            else {
                                $("#ancor_pedido_" + idCotacaoFilha).hide();
                            }
                        }
                    }
                });
            }
            else if ($('#estadoSubgrid_' + idCotacaoFilha).val() == 1) {
                $('#estadoSubgrid_' + idCotacaoFilha).val(0);

                //FECHAR Sub-Grid ALTERNATIVO
                $('#linhaSubGrid_' + idCotacaoFilha).hide();

                $('#ancor_fechar_' + idCotacaoFilha).hide();
                //$('#ancor_pedido_' + idCotacaoFilha).hide();
                $('#ancor_abrir_' + idCotacaoFilha).show();
            }
        }

        //FUNÇÃO EXIBIR / ESCONDER GRID
        function subGridExibirInformacoesCotacao(idCodigoProduto) {
            if ($('#estadoSubgridItens_' + idCodigoProduto).val() == 0) {
                $('#estadoSubgridItens_' + idCodigoProduto).val(1);

                $('#ancor_abrirItens_' + idCodigoProduto).hide();
                $('#ancor_fecharItens_' + idCodigoProduto).show();

                //ABRIR Sub-Grid ALTERNATIVO
                $('#linhaSubGridPorProduto1_' + idCodigoProduto).show();
                $('#linhaSubGridPorProduto2_' + idCodigoProduto).show();
                $('#linhaSubGridPorProduto3_' + idCodigoProduto).show();

                $("#ancor_pedido_" + idCodigoProduto).show();
            }
            else
                if ($('#estadoSubgridItens_' + idCodigoProduto).val() == 1) {
                $('#estadoSubgridItens_' + idCodigoProduto).val(0);

                //FECHAR Sub-Grid ALTERNATIVO
                $('#linhaSubGridPorProduto1_' + idCodigoProduto).hide();
                $('#linhaSubGridPorProduto2_' + idCodigoProduto).hide();
                $('#linhaSubGridPorProduto3_' + idCodigoProduto).hide();

                $("#ancor_pedido_" + idCodigoProduto).hide();

                $('#ancor_fecharItens_' + idCodigoProduto).hide();
                $('#ancor_abrirItens_' + idCodigoProduto).show();
            }
        }

        //FUNÇÃO EFETUAR PEDIDO
        function FazerPedido(idCotacaoFilha, tipo, idCotacaoMaster, idProduto, botao, idValor) {
            debugger;

                //=====================================================
                var valorPedido = 0;

                if (tipo == 1) {
                    valorPedido = parseFloat($(botao).closest('tbody').find('.menorValorTodoPedido').text().replace('.', '').replace(',', '.')); //PEGAR valor a ser PEDIDO, na árvore DOM
                }
                else {
                    valorPedido = parseFloat($(botao).closest('tr').prev().prev().find('.menorValorProduto').text().replace('.', '').replace(',', '.')); //PEGAR valor a ser PEDIDO, na árvore DOM
                }                

                $.ajax({
                    type: "POST",
                    url: "/UsuarioCotante/FazerPedidoEmpresas",
                    dataType: "json",
                    data: {
                        'tipoPedido': tipo,
                        'idCotacaoMaster': idCotacaoMaster,
                        'idCotacaoFilha': idCotacaoFilha,
                        'idProduto': idProduto,
                        'valorPedido': valorPedido
                    },
                    success: function (data) {
                        if (data.pedidoFeito == "sim") {

                            if (tipo == 1) {
                                $('#ancor_pedido_' + idCotacaoFilha).hide();
                                $('#pedido_' + idCotacaoFilha).show();
                            }
                            else if (tipo == 2) {
                                $('#ancor_pedido_' + idValor).hide();
                                $('#pedido_' + idValor).show();
                            }                            

                            swal({ title: 'PARABÉNS: \n\nO Pedido realizado com Sucesso!\nAguarde a confirmação do vendedor que teve a proposta vencedora.', type: "success", confirmButtonColor: "#337ab7" });
                        }
                        else {
                            swal({ title: 'ATENÇÃO: \n\nO Pedido não foi realizado!\nAguarde um pouco e tente novamente mais tarde.', type: "error", confirmButtonColor: "#337ab7" });
                        }
                    }
                });
                //=====================================================
        }
        //==========================================================================
    </script>
}
